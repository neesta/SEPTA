!function(){"use strict";function t(t){var n=document.location.hash,s=n.split("#")[1],l=0,i="",c=[];r=t,n!=o&&""!=n&&($(".select-destination").val(s),$(".destinationTxt").html(s),o=a(s)),document.title="SEPTA "+o+" Station Rundown",$.each(r,function(t,a){var n=a.dest;if(n===o){l++;var s="<div class='col-xs-12 col-md-6'>"+e(a,t)+"</div>";c.push(s)}}),l>=1?($("#ajax").html(c),$.each(r,function(t,e){var a=e.dest;if(a===o){var n=new google.maps.LatLng(parseFloat(e.lat),parseFloat(e.lon)),s={center:n,zoom:16},l=new google.maps.Map(document.getElementById("map-canvas"+t),s),i=new google.maps.Marker({position:n,map:l,title:"I'm here!"});i.setMap(l),google.maps.event.addDomListener(window,"resize",function(){var t=l.getCenter();google.maps.event.trigger(l,"resize"),l.setCenter(t)})}})):(i="<br><br><h5>Well it looks like there aren't any trains currently headed towards "+o+"</h5>",$("#ajax").html(i))}function e(t,e){var a="";return a+="<ul class='train'>",a+="<li><h4>Next Stop <stromg>"+t.nextstop+"</h4></li>",a+=0===t.late?"<li class='status bg-success'>The train is not late.</li>":1===t.late?"<li class='status bg-danger'>It's running "+t.late+" minute late.</li>":"<li class='status bg-danger'>It's running "+t.late+" minutes late.</li>",a+="<li><div id='map-canvas"+e+"'></div></li>",a+="</li></ul>"}function a(t){var e=t;return"Chestnut Hill West"==e?e="Chestnut H West":"Chestnut Hill East"==e&&(e="Chestnut H West"),e}const n="http://www3.septa.org/hackathon/TrainView/?callback=?",s=3e5;var l={},i=!1,o="Warminster",r=[];$.getJSON(n,l,t),$("#autoRefresh").change(function(){$(this).prop("checked")?(i=!0,$("label").html("Auto Refresh <span class='subtle'>- every 5 seconds</span>")):(i=!1,$("label").html("Auto Refresh"))});setInterval(function(){i&&$.getJSON(n,l,t)},s);$(".select-destination").change(function(){o=$(this).val(),document.location.hash=o,console.log("display data = "+r),t(r)})}();